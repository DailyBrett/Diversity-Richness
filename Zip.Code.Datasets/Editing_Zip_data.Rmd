---
title: "Editting Data"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 

```{r}

loading_zipdata <- "~/repos/Diversity-Richness/Zip.Code.Datasets/zip_data_unedited_nolabels.csv" #making a pathway to the downloaded census data
Unedited_zipdata <- read.csv(loading_zipdata) #loading the census data

```


```{r}
reduced_collumns_zip <- c(1:2, 33:34, 42, 47:146) #removing unnecessary columns


Zipcode_Census_data<- Unedited_zipdata[ , reduced_collumns_zip] #make a new table without unnecessary columns

colnames(Zipcode_Census_data) <- c("FIPS", "Name", "3_Digit_Tabulation", "5_Digit_Tabulation" , "Area_Name","Total_Population", "Population_Density", "Area", "Total_Population1", "Total_Population_Male", "Total_Population_Female", "X_Total_Population_Male", "X_Total_Population_Female", "Total_Population2", "Total_Population_Under_5_Years", "Total_Population_5_to_9_Years", "Total_Population_10_to_14_Years", "Total_Population_15_to_17_Years", "Total_Population_18_to_24_Years", "Total_Population_25_to_34_Years", "Total_Population_35_to_44_Years", "Total_Population_45_to_54_Years", "Total_Population_55_to_64_Years", "Total_Population_65_to_74_Years", "Total_Population_75_to_84_Years", "Total_Population_85_Years_And_Over","X_Total_Population_Under_5_Years", "X_Total_Population_5_to_9_Years", "X_Total_Population_10_to_14_Years", "X_Total_Population_15_to_17_Years", "X_Total_Population_18_to_24_Years", "X_Total_Population_25_to_34_Years", "X_Total_Population_35_to_44_Years", "X_Total_Population_45_to_54_Years", "X_Total_Population_55_to_64_Years", "X_Total_Population_65_to_74_Years", "X_Total_Population_75_to_84_Years", "X_Total_Population_85_Years_And_Over", "Total_Population3", "Total_Population_White_Alone", "Total_Population_Black_or African_American_Alone", "Total_Population_American_Indian_And_Native_Alaskan_Alone", "Total_Population_Asian_Alone", "Total_Population_Native_Hawaiian_And_Other_Pacific_Islander_Alone", "Total_Population_Some_Other_Race_Alone","Total_Population_Two_Or_More_Races","X_Total_Population_White_Alone", "X_Total_Population_Black_or_African_American_Alone", "X_Total_Population_American_Indian_And_Native_Alaskan_Alone", "X_Total_Population_Asian_Alone", "X_Total_Population_Native_Hawaiian_And_Other_Pacific_Islander_Alone", "X_Total_Population_Some_Other_Race_Alone","X_Total_Population_Two_Or_More_Races","Households","Households_Family_Households","Households_Married_Couple_Family","Households_Other_Family","Households_Male_Householder_No_Wife_Present","Households_Female_Householder_No_Husband_Present","Households_Nonfamily_Households","Nonfamily_Households_Male_Householder","Nonfamily_Households_Female_Householder","X_Households_Family_Households","X_Households_Married_Couple_Family","X_Households_Other_Family","X_Households_Male_Householder_No_Wife_Present","X_Households_Female_Householder_No_Husband_Present","X_Households_Nonfamily_Households","X_Nonfamily_Households_Male_Householder","X_Nonfamily_Households_Female_Householder","Median_Household_Income","Housing_Units","Occupied_Housing_Units","Owner_Occupied","Renter_Occupied","X_Owner_Occupied","X_Renter_Occupied","Population_With_Poverty_Status","Poverty_Status_Under_1.00","Poverty_Status_1.00_to_1.99","Poverty_Status_Under_2.00","Poverty_Status_2.00_and_Over","X_Poverty_Status_Under_1.00","X_Poverty_Status_1.00_to_1.99","X_Poverty_Status_Under_2.00","X_Poverty_Status_2.00_and_Over", "Total_Population_Last", "Total_Not_Hispanic", "Total_Not_Hispanic_White_Alone", "Total_Not_Hispanic_Black_Alone", "Total_Not_Hispanic_American_Indian_Native_Alaskan_Alone","Total_Not_Hispanic_Asian_Alone","Total_Not_Hispanic_Native_Hawaiian_Pacific_Islander","Total_Not_Hispanic_Other_Race","Total_Not_Hispanic_Two_or_More_Races", "Total_Hispanic","X_Not_Hispanic", "X_Not_Hispanic_White_Alone", "X_Not_Hispanic_Black_Alone", "X_Not_Hispanic_American_Indian_Native_Alaskan_Alone","X_Not_Hispanic_Asian_Alone","X_Not_Hispanic_Native_Hawaiian_Pacific_Islander","X_Not_Hispanic_Other_Race","X_Not_Hispanic_Two_or_More_Races", "X_Hispanic")

#writing usable column names



```

```{r}
write.csv(Zipcode_Census_data, file = "~/repos/Diversity-Richness/Zip.Code.Datasets/Zipcode_Census_data.csv", row.names = FALSE)
#saving the table as a csv file
```



```{r income plot}
library(tidyverse)
library(ggplot2)

values <- c("Percent White" = "red","Percent African American" = "blue",  "Percent Asian" = "green", "Percent Native American" = "purple", "Percent Hispanic" = "yellow")
text_needed <-
"Percent White = RED 
Percent African American = BLUE 
Percent Asian = GREEN 
Percent Native American = PURPLE 
Percent Hispanic = YELLOW"

Zipcode_Census_data %>%
  group_by()



ggplot(Zipcode_Census_data) +
  geom_smooth(aes(x = X_Total_Population_White_Alone, y = Median_Household_Income), fill ="white", color = "red", show.legend = T) +
  geom_smooth(aes(x = X_Total_Population_Black_or_African_American_Alone, y = Median_Household_Income), fill = "white", color = "blue", show.legend = T) +
  geom_smooth(aes(x = X_Total_Population_Asian_Alone, y = Median_Household_Income), fill = "white", color = "green", show.legend = T) +
  geom_smooth(aes(x = X_Total_Population_American_Indian_And_Native_Alaskan_Alone, y = Median_Household_Income), fill = "white", color = "purple", show.legend = T) +
  geom_smooth(aes(x = X_Hispanic, y = Median_Household_Income), fill = "white", color = "yellow", show.legend = T) +
  labs(x = "Percentage Population of Population for Each Racial Demgraphic", y = "Median Household Income",
         title = "Racial Demographics and Median Household Income", caption = text_needed) +
  theme_classic()
#May want to add further descriptors or learn how to add multiple lines


```



```{r income plot attempt 2}
library(tidyverse)
library(ggplot2)

ggplot(Zipcode_Census_data) +
  geom_smooth(aes(x = X_Total_Population_White_Alone, y = Median_Household_Income, color = "#A1C9F4"), fill ="#A1C9F4", alpha = 0.2, show.legend = T)  +
  geom_smooth(aes(x = X_Total_Population_Black_or_African_American_Alone, y = Median_Household_Income, color = "#FFB482"), fill = "#FFB482", alpha = 0.2, show.legend = T) + #Fixed shading
  geom_smooth(aes(x = X_Total_Population_Asian_Alone, y = Median_Household_Income, color = "#8DE5A1"), fill = "#8DE5A1", alpha = 0.2, show.legend = T) +
  geom_smooth(aes(x = X_Total_Population_American_Indian_And_Native_Alaskan_Alone, y = Median_Household_Income, color = "#D0BBFF"), fill = "#D0BBFF", alpha = 0.2, show.legend = T) +
  geom_smooth(aes(x = X_Hispanic, y = Median_Household_Income, color = "#FF9F9B"), fill = "#FF9F9B", alpha = 0.2, show.legend = T) +
  scale_color_manual(values = c( "#8DE5A1" = "#8DE5A1","#A1C9F4" = "#A1C9F4","#D0BBFF" = "#D0BBFF", "#FF9F9B" = "#FF9F9B", "#FFB482" = "#FFB482"), #Fixed order
                     name = "Race",
                     labels = c("Asian", "White", "Native American/Alaskan", "Hispanic", "Black")) +
  labs(x = "Percentage Population of Population for Each Racial Demgraphic", y = "Median Household Income", title = "Racial Demographics and Median Household Income")

#Don't know how to correct red shading on key

```


```{r trial}
ggplot(Zipcode_Census_data) +
  geom_smooth(aes(x = X_Total_Population_White_Alone, y = Median_Household_Income, color = "#A1C9F4"), fill ="white", show.legend = T)  +
  geom_smooth(aes(x = X_Total_Population_Black_or_African_American_Alone, y = Median_Household_Income, color = "#FFB482"), fill = "white", show.legend = T) +
  geom_smooth(aes(x = X_Total_Population_Asian_Alone, y = Median_Household_Income, color = "#8DE5A1"), fill = "white", show.legend = T) +
  geom_smooth(aes(x = X_Total_Population_American_Indian_And_Native_Alaskan_Alone, y = Median_Household_Income, color = "#D0BBFF"), fill = "white", show.legend = T) +
  geom_smooth(aes(x = X_Hispanic, y = Median_Household_Income, color = "#FF9F9B"), fill = "white", show.legend = T) +
  scale_color_manual(values = c("#A1C9F4" = "#A1C9F4", "#FFB482" = "#FFB482", "#8DE5A1" = "#8DE5A1", "#D0BBFF" = "#D0BBFF", "#FF9F9B" = "#FF9F9B"),
                     name = "Race",
                     labels = c("White", "Black or African American", "Asian", "American Indian And Native Alaskan", "Hispanic")) +
  labs(x = "Percentage Population of Population for Each Racial Demgraphic", y = "Median Household Income", title = "Racial Demographics and Median Household Income").

```








```{r}
library(tidyverse)
library(ggplot2)

ggplot(Zipcode_Census_data) +
  geom_jitter(aes(x = X_Total_Population_White_Alone, y = Median_Household_Income), fill ="black", color = "#ffd4c4") + #made a jitter plot first so it not cover
   geom_smooth(aes(x = X_Total_Population_White_Alone, y = Median_Household_Income), fill ="#ffb5e2", color = "#ce70e8" ) + #then added smooth plot to track trend
  labs(x = "Percentage Population White", y = "Median Household Income",
         title = "Whiteness and Median Household Income", caption = "Data: Zipcode_Census_data")
#May want to add further descriptors or learn how to add multiple lines

```

```{r}
Zipcode_with_Zones <- Zipcode_Census_data %>%
  mutate(Zipcode_Zone= case_when(
    substr(Name, 7, 7) == "0" ~ "North East",
    substr(Name, 7, 7) == "1" ~ "New York Region (Lower North East)",
    substr(Name, 7, 7) == "2" ~ "Central East Coast",
    substr(Name, 7, 7) == "3" ~ "South East",
    substr(Name, 7, 7) == "4" ~ "Great Lakes",
    substr(Name, 7, 7) == "5" ~ "Northern Midwest",
    substr(Name, 7, 7) == "6" ~ "Central Interior",
    substr(Name, 7, 7) == "7" ~ "Texas Region",
    substr(Name, 7, 7) == "8" ~ "Western Interior",
    substr(Name, 7, 7) == "9" ~ "West Coast (and Hawaii/Alaska)",
    TRUE ~ "Other"  # Default case
  ), .after = Area_Name) %>%

# Create the boxplot
ggplot(Zipcode_with_Zones, aes(x = Zipcode_Zone, y = X_Total_Population_White_Alone, fill = Zipcode_Zone)) +
  geom_boxplot(outlier.shape = NA) +
  labs(x = "ZIP Code Zones", y = "Percentage White",
       title = "Percentage of Population White by Zip Code Region", fill = "Zone Names") +
  theme(axis.text.x = element_blank())


```


